# ==============================================================================
# TMUX CONFIGURATION
# Unified muscle memory: Ctrl Space prefix matches zellij tmux mode
# Ctrl Space + key is identical in both tmux and zellij
# ==============================================================================

# Prefix: Ctrl Space (replaces default Ctrl b)
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# General
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*256col*:Tc"
set -g history-limit 10000
set -g mouse on
set -sg escape-time 0
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on

# Vi mode for copy/scroll
setw -g mode-keys vi

# Status bar: top, minimal (matches zellij compact-top-bar)
set -g status-position top
set -g status-style 'bg=colour235 fg=colour136'
set -g status-left ''
set -g status-right '#H  #S'
set -g status-right-length 40
set -g window-status-current-style 'fg=colour166 bold'

# ==============================================================================
# UNIFIED KEY TABLE â€” Ctrl Space + key (identical in zellij tmux mode)
# ==============================================================================

# Pane navigation (vim hjkl)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# New pane: n=right (horizontal split), N=down (vertical split)
bind n split-window -h
bind N split-window -v

# Close: x=pane, X=window
bind x kill-pane
bind X kill-window

# Fullscreen toggle
bind f resize-pane -Z

# Rename window
bind r command-prompt -I "#W" { rename-window "%%" }

# Window (tab) navigation: [ = prev, ] = next
unbind [
unbind ]
bind [ previous-window
bind ] next-window

# Move window: < = left, > = right
bind < { swap-window -t -1; select-window -t -1 }
bind > { swap-window -t +1; select-window -t +1 }

# New window
bind c new-window

# Resize panes: H/J/K/L = directional (repeatable), -/= = decrease/increase
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5
bind -r - resize-pane -D 1
bind -r = resize-pane -U 1

# Detach
bind d detach-client

# Sync panes (toggle)
bind s set synchronize-panes

# Move/swap pane
bind m swap-pane -D

# Enter copy/scroll/search mode, start forward search (vim /)
bind / copy-mode \; send-keys /

# Send literal Ctrl b to terminal (escape hatch)
bind C-b send-keys C-b
